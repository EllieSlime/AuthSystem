{% extends "core/base.html" %}
{% block title %}Аккаунт - SmartHome{% endblock %}

{% block content %}

<!-- Аккаунт пользователя -->
<section class="account">
    <div class="container">
        <h2 class="section-title">Устройства</h2>

        <div class="account-container">
            <div class="sidebar">
                <ul class="sidebar-nav">
                    <li><a href="{% url 'lobby' %}"><i class="fas fa-arrow-left"></i> Выбрать лобби</a></li>
                    <li><a href="#" class="active"><i class="fas fa-th-large"></i> Каталог устройств</a></li>
                    <li><a href="{% url 'assistant' %}"><i class="fas fa-robot"></i> Умный помощник</a></li>
                    <li><a href="{% url 'settings' %}"><i class="fas fa-cog"></i> Настройки профиля</a></li>
                </ul>
            </div>

            <div class="account-content">
                <div class="devices-grid">
                    {% for device in devices %}
                    <div class="device-card">
                        <div class="device-header">
                            <div class="device-icon">
                                {% if device.device_type == "lamp" %}
                                    <i class="fas fa-lightbulb"></i>
                                {% elif device.device_type == "kettle" %}
                                    <i class="fas fa-mug-hot"></i>
                                {% elif device.device_type == "thermometer" %}
                                    <i class="fas fa-thermometer-half"></i>
                                {% endif %}
                            </div>
                            <div class="device-title">{{ device.name }}</div>
                            {% if not lobby.is_active %}
                                <div class="device-status status-offline">Неактивно</div>
                            {% else %}
                                <div class="device-status status-online">Активно</div>
                            {% endif %}
                        </div>
                        <div class="device-actions">
                            {% if not lobby.is_active %}
                                <a class="btn btn-small btn-outline">Неактивно</a>
                            {% else %}
                                <a href="{% url 'device_detail' lobby.id device.id %}" class="btn btn-small">Параметры</a>
                            {% endif %}
                            {% if user_role in "owner,admin" %}
                                <a href="{% url 'device_delete' lobby.id device.id %}" class="btn btn-small btn-outline">Удалить</a>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}

                    {% if user_role != "guest" %}
                    <div class="device-card add-device-card">
                        <div class="device-header">
                            <div class="device-icon">
                                <i class="fas fa-plus"></i>
                            </div>
                            <div class="device-title">Добавить устройство</div>
                        </div>
                        <div class="device-actions">
                            <a href="{% url 'device_add' lobby.id %}" class="btn btn-small">Добавить</a>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}